(()=>{"use strict";var e,t={8919:(e,t,n)=>{n(853),n(4994);var o=n(6075),r=n(4418),i=n(3653),a={scene:new o.xsS,gltfLoader:new r.E,mixer:void 0,world:new i.q3,defaultMaterial:new i.F5("default"),glassMaterial:new i.F5("glass"),playerMaterial:new i.F5("player")},c="#3e1322",s="#ffe9ac",u="#071d28",l="#111",f="#441c1d",y="#9fdfff",p="#222",m={floor:new o.DvJ(200,1,200),pillar:new o.DvJ(5,10,5),bar:new o.DvJ(.1,.3,25.2),sideLight:new o.xo$(.1,6,6),glass:new o.DvJ(1.2,.05,1.2)},d={floor:new o.xoR({color:l}),pillar:new o.xoR({color:u}),bar:new o.xoR({color:f}),sideLight:new o.xoR({color:s}),glass1:new o.xoR({color:y,transparent:!0,opacity:.1}),glass2:new o.xoR({color:y,transparent:!0,opacity:.1})},h=new Audio;h.src="./sounds/Crash.mp3";var b=new Audio;b.src="./sounds/Hit.mp3";var v={strong:b,normal:h},w=n(8012);n(6908),n(4130),n(6543),n(3142),n(6364),n(6632),n(174),n(1928),n(4883),n(5007),n(8995);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==g(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===g(i)?i:String(i)),o)}var r,i}var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O(this,e),this.name=t.name||"",this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.rotationX=t.rotationX||0,this.rotationY=t.rotationY||0,this.rotationZ=t.rotationZ||0,this.mass=t.mass||0,this.cannonMaterial=t.cannonMaterial||a.defaultMaterial}var t,n,o;return t=e,(n=[{key:"setCannonBody",value:function(){var e=this.cannonMaterial,t=new i.xu(new i.AO(this.width/2,this.height/2,this.depth/2));this.cannonBody=new i.uT({mass:this.mass,position:new i.AO(this.x,this.y,this.z),shape:t,material:e}),this.cannonBody.quaternion.setFromAxisAngle(new i.AO(0,1,0),this.rotationY),a.world.addBody(this.cannonBody)}}])&&j(t.prototype,n),o&&j(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==P(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===P(i)?i:String(i)),o)}var r,i}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=B(e);if(t){var r=B(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(c,e);var t,n,r,i=_(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).geometry=m.pillar,t.material=d.pillar,t.width=t.geometry.parameters.width,t.height=t.geometry.parameters.height,t.depth=t.geometry.parameters.depth,t.mesh=new o.Kj0(t.geometry,t.material),t.mesh.position.set(t.x,t.y,t.z),t.mesh.name=t.name,t.mesh.castShadow=!0,t.mesh.receiveShadow=!0,a.scene.add(t.mesh),t.setCannonBody(),t.cannonBody.mesh=t.mesh,t.cannonBody.mesh.isEnd=!1,t.cannonBody.addEventListener("collide",(function(e){"pillar1"===e.target.mesh.name&&(e.target.mesh.isEnd=!0)})),t}return t=c,n&&M(t.prototype,n),r&&M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(S);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==T(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===T(i)?i:String(i)),o)}var r,i}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=A(e);if(t){var r=A(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(c,e);var t,n,r,i=C(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).geometry=m.floor,t.material=d.floor,t.width=t.geometry.parameters.width,t.height=t.geometry.parameters.height,t.depth=t.geometry.parameters.depth,t.mesh=new o.Kj0(t.geometry,t.material),t.mesh.position.set(t.x,t.y,t.z),t.mesh.name=e.name,t.mesh.receiveShadow=!0,a.scene.add(t.mesh),t.setCannonBody(),t.cannonBody.mesh=t.mesh,t.cannonBody.addEventListener("collide",(function(e){})),t}return t=c,n&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(S);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function N(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==q(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===q(i)?i:String(i)),o)}var r,i}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=H(e);if(t){var r=H(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return F(this,n)}}function F(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(c,e);var t,n,r,i=X(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).geometry=m.bar,t.material=d.bar,t.width=t.geometry.parameters.width,t.height=t.geometry.parameters.height,t.depth=t.geometry.parameters.depth,t.mesh=new o.Kj0(t.geometry,t.material),t.mesh.position.set(t.x,t.y,t.z),t.mesh.castShadow=!0,t.mesh.receiveShadow=!0,a.scene.add(t.mesh),t.setCannonBody(),t}return t=c,n&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(S);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==K(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==K(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===K(i)?i:String(i)),o)}var r,i}var J=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.container||a.scene;this.name=t.name||"",this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.geometry=m.sideLight,this.material=d.sideLight,this.mesh=new o.Kj0(this.geometry,this.material),this.mesh.position.set(this.x,this.y,this.z),n.add(this.mesh)}var t,n,r;return t=e,(n=[{key:"turnOff",value:function(){this.mesh.material.color.set(p)}}])&&Z(t.prototype,n),r&&Z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==W(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==W(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===W(i)?i:String(i)),o)}var r,i}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Q(e);if(t){var r=Q(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return G(this,n)}}function G(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(c,e);var t,n,r,i=$(c);function c(e){var t;switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).type=e.type,t.step=e.step,t.geometry=m.glass,t.type){case"normal":t.material=d.glass1,t.mass=1;break;case"strong":t.material=d.glass2,t.mass=0}t.width=t.geometry.parameters.width,t.height=t.geometry.parameters.height,t.depth=t.geometry.parameters.depth,t.mesh=new o.Kj0(t.geometry,t.material),t.mesh.position.set(t.x,t.y,t.z),t.mesh.castShadow=!0,t.mesh.receiveShadow=!0,t.mesh.name=t.name,t.mesh.type=t.type,t.mesh.step=t.step,a.scene.add(t.mesh),t.setCannonBody(),t.cannonBody.addEventListener("collide",(function(e){e.contact.getImpactVelocityAlongNormal()>5&&(n.currentTime=0,n.play())}));var n=v[t.type];return t}return t=c,n&&U(t.prototype,n),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(S);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==te(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==te(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===te(i)?i:String(i)),o)}var r,i}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ae(e);if(t){var r=ae(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ie(this,n)}}function ie(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(c,e);var t,n,r,i=re(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=i.call(this,e),a.gltfLoader.load("./models/ilbuni.glb",(function(e){e.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),t.modelMesh=e.scene.children[0],t.width=t.modelMesh.scale.x,t.height=t.modelMesh.scale.y+.5,t.depth=t.modelMesh.scale.z,t.modelMesh.position.set(t.x,t.y,t.z),t.modelMesh.rotation.set(t.rotationX,t.rotationY,t.rotationZ),t.modelMesh.castShadow=!0,t.modelMesh.name=t.name,a.scene.add(t.modelMesh),t.modelMesh.animations=e.animations,a.mixer=new o.Xcj(t.modelMesh),t.actions=[],t.actions[0]=a.mixer.clipAction(t.modelMesh.animations[0]),t.actions[1]=a.mixer.clipAction(t.modelMesh.animations[1]),t.actions[2]=a.mixer.clipAction(t.modelMesh.animations[2]),t.actions[2].repetitions=1,t.actions[0].play(),t.setCannonBody(),t.cannonBody.mesh=t.modelMesh})),t}return t=c,n&&ne(t.prototype,n),r&&ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(S);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==se(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==se(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===se(i)?i:String(i)),o)}var r,i}function le(e,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},le(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=pe(e);if(t){var r=pe(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ye(this,n)}}function ye(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}(n,e);var t=fe(n);function n(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e)).width=.5,o.height=.5,o.depth,a.gltfLoader.load("./models/marshal.glb",(function(e){e.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),o.modelMesh=e.scene.children[0],o.modelMesh.scale.set(.3,.3,.3),o.modelMesh.position.set(o.x,o.y,o.z),o.modelMesh.rotation.set(o.rotationX,o.rotationY,o.rotationZ),o.modelMesh.castShadow=!0,o.modelMesh.name=o.name,o.modelMesh.visible=!1,a.scene.add(o.modelMesh)})),o}return function(e,t,n){return t&&ue(e.prototype,t),n&&ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(n)}(S),de=document.querySelectorAll("#reset"),he=document.querySelector("#clear"),be=document.querySelector("#three-canvas"),ve=new o.CP7({canvas:be,antialias:!0});ve.setSize(window.innerWidth,window.innerHeight),ve.setPixelRatio(window.devicePixelRatio>1?2:1),ve.shadowMap.enabled=!0,ve.shadowMap.type=o.ntZ,a.scene.background=new o.Ilk(c);var we=new o.cPb(75,window.innerWidth/window.innerHeight,.1,1e3);we.position.y=19,we.position.z=14,a.scene.add(we);var ge=new o.Mig(s,1);a.scene.add(ge);var Oe=50,je=new o.PMe(s,1.4);je.castShadow=!0;var Se=je.clone(),Pe=je.clone(),Me=je.clone();je.position.set(-50,Oe,Oe),Se.position.set(Oe,Oe,Oe),Pe.position.set(-50,Oe,-50),Me.position.set(Oe,Oe,-50),a.scene.add(je,Se,Pe,Me),new w.z(we,ve.domElement).enableDamping=!0,a.world.gravity.set(0,-10,0);var xe=new i.kp(a.defaultMaterial,a.defaultMaterial,{friction:.3,restitution:.2}),_e=new i.kp(a.glassMaterial,a.defaultMaterial,{friction:.01,restitution:0}),Ee=new i.kp(a.glassMaterial,a.playerMaterial,{friction:1,restitution:0});a.world.defaultContactMaterial=xe,a.world.addContactMaterial(_e),a.world.addContactMaterial(Ee);var Be=1.2,Re=[],Te=(new D({name:"floor"}),new R({name:"pillar1",x:0,y:5.5,z:12*-1.2-.6})),ze=new R({name:"pillar",x:0,y:5.5,z:14.999999999999998});Re.push(Te,ze);for(var ke=new I({name:"bar",x:-1.6,y:10.3,z:0}),Ce=(new I({name:"bar",x:-.4,y:10.3,z:0}),new I({name:"bar",x:1.6,y:10.3,z:0})),Le=(new I({name:"bar",x:.4,y:10.3,z:0}),[]),Ae=0;Ae<49;Ae++)Le.push(new J({name:"sideLight",container:ke.mesh,z:.5*Ae-12}));for(var De=0;De<49;De++)Le.push(new J({name:"sideLight",container:Ce.mesh,z:.5*De-12}));for(var qe=[],Ne=[],Ye=0;Ye<10;Ye++)Ne.push(-(Ye*Be*2-9*Be));for(var Xe=0;Xe<10;Xe++){switch(Math.round(Math.random())){case 0:qe=["normal","strong"];break;case 1:qe=["strong","normal"]}var Fe=new ee({step:Xe+1,name:"glass-".concat(qe[0]),x:-1,y:10.5,z:Ne[Xe],type:qe[0],cannonMaterial:a.glassMaterial}),He=new ee({step:Xe+1,name:"glass-".concat(qe[1]),x:1,y:10.5,z:Ne[Xe],type:qe[1],cannonMaterial:a.glassMaterial});Re.push(Fe,He)}var Ie=10.9,Ke=.03,Ze=(Math.PI,new ce({name:"player",x:0,y:Ie,z:13,rotationY:Math.PI,cannonMaterial:a.playerMaterial,mass:30}));Re.push(Ze);var Je=new me({name:"portal",x:0,y:Ie-.3,z:-16,rotationX:-Math.PI/2});Re.push(Je);var We=new o.SUY,Ue=1,Ve=0;var $e={};window.addEventListener("resize",(function(){we.aspect=window.innerWidth/window.innerHeight,we.updateProjectionMatrix(),ve.setSize(window.innerWidth,window.innerHeight),ve.render(a.scene,we)})),window.addEventListener("keydown",(function(e){$e[e.keyCode]=!0})),window.addEventListener("keyup",(function(e){$e[e.keyCode]=!1})),de[0].addEventListener("click",(function(){window.location.reload()})),function e(){var t=We.getDelta();a.mixer&&a.mixer.update(t),a.world.step(1/60,t,3),($e[87]||$e[38])&&(Ze.cannonBody.position.z-=Ke),($e[83]||$e[40])&&(Ze.cannonBody.position.z+=Ke),($e[65]||$e[37])&&(Ze.cannonBody.position.x-=Ke),($e[68]||$e[39])&&(Ze.cannonBody.position.x+=Ke),$e[32]&&1===Ue&&Ze.cannonBody.position.y>10&&(Ze.actions[2].stop(),Ze.actions[2].play(),Ue=0,Ve=Ze.cannonBody.position.y+3),Re.forEach((function(e){var t;if("pillar1"===e.name&&null!==(t=e.cannonBody)&&void 0!==t&&t.mesh.isEnd){he.style.top="0%";var n=setTimeout((function(){he.style.animation="rotate_image 6s linear infinite",clearTimeout(n)}),1e3)}e.cannonBody&&("player"===e.name?Ze.modelMesh.position.copy(Ze.cannonBody.position):e.mesh?(e.mesh.position.copy(e.cannonBody.position),e.mesh.quaternion.copy(e.cannonBody.quaternion)):e.modelMesh&&(e.modelMesh.position.copy(e.cannonBody.position),e.modelMesh.quaternion.copy(e.cannonBody.quaternion)))})),Ze.modelMesh&&(Ze.cannonBody.position.y+=Ve*t,0===Ue?(Ve-=19.6*t,9.9<=Ze.cannonBody.position.y&&Ze.cannonBody.position.y<=Ie&&(Ue=1,Ve=0,Ze.cannonBody.position.y=Ie)):Ze.cannonBody.position.y<5.9&&setTimeout((function(){he.style.top="0%";var e=setTimeout((function(){he.style.animation="rotate_image 6s linear infinite",clearTimeout(e)}),1e3)}),4e3),we.position.set(Ze.modelMesh.position.x,Ze.modelMesh.position.y+7,Ze.modelMesh.position.z+6),we.lookAt(Ze.modelMesh.position)),ve.render(a.scene,we),ve.setAnimationLoop(e)}()}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,n,r,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,r,i]=e[l],c=!0,s=0;s<n.length;s++)(!1&i||a>=i)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,r,i]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[a,c,s]=n,u=0;if(a.some((t=>0!==e[t]))){for(r in c)o.o(c,r)&&(o.m[r]=c[r]);if(s)var l=s(o)}for(t&&t(n);u<a.length;u++)i=a[u],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(l)},n=self.webpackChunkthreejs_study=self.webpackChunkthreejs_study||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[740],(()=>o(8919)));r=o.O(r)})();