(()=>{"use strict";var e,t={8919:(e,t,n)=>{n(4994),n(853),n(2900);var o=n(6075),r=n(4418),i=n(3653),a={scene:new o.xsS,gltfLoader:new r.E,mixer:void 0,world:new i.q3,defaultMaterial:new i.F5("default"),glassMaterial:new i.F5("glass"),playerMaterial:new i.F5("player")},c="#3e1322",s="#ffe9ac",u="#071d28",l="#111",f="#441c1d",y="#9fdfff",p="#222",m={floor:new o.DvJ(200,1,200),pillar:new o.DvJ(5,10,5),bar:new o.DvJ(.1,.3,25.2),sideLight:new o.xo$(.1,6,6),glass:new o.DvJ(1.2,.05,1.2)},d={floor:new o.xoR({color:l}),pillar:new o.xoR({color:u}),bar:new o.xoR({color:f}),sideLight:new o.xoR({color:s}),glass1:new o.xoR({color:y,transparent:!0,opacity:.1}),glass2:new o.xoR({color:y,transparent:!0,opacity:.3})},h=new Audio;h.src="./sounds/Crash.mp3";var b=new Audio;b.src="./sounds/Hit.mp3";var v={strong:b,normal:h},w=n(8012);n(6908),n(4130),n(6543),n(3142),n(6364),n(6632),n(174),n(1928),n(4883),n(5007),n(8995);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==g(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===g(i)?i:String(i)),o)}var r,i}var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O(this,e),this.name=t.name||"",this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.rotationX=t.rotationX||0,this.rotationY=t.rotationY||0,this.rotationZ=t.rotationZ||0,this.mass=t.mass||0,this.cannonMaterial=t.cannonMaterial||a.defaultMaterial}var t,n,o;return t=e,(n=[{key:"setCannonBody",value:function(){var e=this.cannonMaterial,t=new i.xu(new i.AO(this.width/2,this.height/2,this.depth/2));this.cannonBody=new i.uT({mass:this.mass,position:new i.AO(this.x,this.y,this.z),shape:t,material:e}),this.cannonBody.quaternion.setFromAxisAngle(new i.AO(0,1,0),this.rotationY),a.world.addBody(this.cannonBody)}}])&&j(t.prototype,n),o&&j(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==P(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===P(i)?i:String(i)),o)}var r,i}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=R(e);if(t){var r=R(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(c,e);var t,n,r,i=E(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).geometry=m.pillar,t.material=d.pillar,t.width=t.geometry.parameters.width,t.height=t.geometry.parameters.height,t.depth=t.geometry.parameters.depth,t.mesh=new o.Kj0(t.geometry,t.material),t.mesh.position.set(t.x,t.y,t.z),t.mesh.name=t.name,t.mesh.castShadow=!0,t.mesh.receiveShadow=!0,a.scene.add(t.mesh),t.setCannonBody(),t.cannonBody.mesh=t.mesh,t.cannonBody.mesh.isEnd=!1,t.cannonBody.addEventListener("collide",(function(e){"pillar1"!==e.target.mesh.name||e.target.mesh.isEnd||(e.target.mesh.isEnd=!0)})),t}return t=c,n&&M(t.prototype,n),r&&M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(S);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==T(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===T(i)?i:String(i)),o)}var r,i}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=A(e);if(t){var r=A(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(c,e);var t,n,r,i=C(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).geometry=m.floor,t.material=d.floor,t.width=t.geometry.parameters.width,t.height=t.geometry.parameters.height,t.depth=t.geometry.parameters.depth,t.mesh=new o.Kj0(t.geometry,t.material),t.mesh.position.set(t.x,t.y,t.z),t.mesh.receiveShadow=!0,a.scene.add(t.mesh),t.setCannonBody(),t}return t=c,n&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(S);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function Y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==N(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==N(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===N(i)?i:String(i)),o)}var r,i}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=H(e);if(t){var r=H(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return F(this,n)}}function F(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(c,e);var t,n,r,i=X(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).geometry=m.bar,t.material=d.bar,t.width=t.geometry.parameters.width,t.height=t.geometry.parameters.height,t.depth=t.geometry.parameters.depth,t.mesh=new o.Kj0(t.geometry,t.material),t.mesh.position.set(t.x,t.y,t.z),t.mesh.castShadow=!0,t.mesh.receiveShadow=!0,a.scene.add(t.mesh),t.setCannonBody(),t}return t=c,n&&Y(t.prototype,n),r&&Y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(S);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function W(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==K(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==K(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===K(i)?i:String(i)),o)}var r,i}var Z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.container||a.scene;this.name=t.name||"",this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.geometry=m.sideLight,this.material=d.sideLight,this.mesh=new o.Kj0(this.geometry,this.material),this.mesh.position.set(this.x,this.y,this.z),n.add(this.mesh)}var t,n,r;return t=e,(n=[{key:"turnOff",value:function(){this.mesh.material.color.set(p)}}])&&W(t.prototype,n),r&&W(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==J(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==J(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===J(i)?i:String(i)),o)}var r,i}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Q(e);if(t){var r=Q(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return G(this,n)}}function G(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(c,e);var t,n,r,i=$(c);function c(e){var t;switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).type=e.type,t.step=e.step,t.geometry=m.glass,t.type){case"normal":t.material=d.glass1,t.mass=1;break;case"strong":t.material=d.glass2,t.mass=0}t.width=t.geometry.parameters.width,t.height=t.geometry.parameters.height,t.depth=t.geometry.parameters.depth,t.mesh=new o.Kj0(t.geometry,t.material),t.mesh.position.set(t.x,t.y,t.z),t.mesh.castShadow=!0,t.mesh.receiveShadow=!0,t.mesh.name=t.name,t.mesh.type=t.type,t.mesh.step=t.step,a.scene.add(t.mesh),t.setCannonBody(),t.cannonBody.addEventListener("collide",(function(e){e.contact.getImpactVelocityAlongNormal()>5&&(n.currentTime=0,n.play())}));var n=v[t.type];return t}return t=c,n&&U(t.prototype,n),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(S);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==te(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==te(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===te(i)?i:String(i)),o)}var r,i}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ae(e);if(t){var r=ae(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ie(this,n)}}function ie(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(c,e);var t,n,r,i=re(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=i.call(this,e),a.gltfLoader.load("./models/ilbuni.glb",(function(e){e.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),t.modelMesh=e.scene.children[0],t.width=t.modelMesh.scale.x,t.height=t.modelMesh.scale.y+.5,t.depth=t.modelMesh.scale.z,t.modelMesh.position.set(t.x,t.y,t.z),t.modelMesh.rotation.set(t.rotationX,t.rotationY,t.rotationZ),t.modelMesh.castShadow=!0,t.modelMesh.name=t.name,a.scene.add(t.modelMesh),t.modelMesh.animations=e.animations,a.mixer=new o.Xcj(t.modelMesh),t.actions=[],t.actions[0]=a.mixer.clipAction(t.modelMesh.animations[0]),t.actions[1]=a.mixer.clipAction(t.modelMesh.animations[1]),t.actions[2]=a.mixer.clipAction(t.modelMesh.animations[2]),t.actions[2].repetitions=1,t.actions[0].play(),t.setCannonBody()})),t}return t=c,n&&ne(t.prototype,n),r&&ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(S);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==se(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==se(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===se(i)?i:String(i)),o)}var r,i}function le(e,t,n){return t&&ue(e.prototype,t),n&&ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var fe=le((function e(t){var n,o,r,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mouseMoved,t.addEventListener("mousedown",(function(e){n=e.clientX,o=e.clientY,r=Date.now()})),t.addEventListener("mouseup",(function(e){var t=Math.abs(e.clientX-n),a=Math.abs(e.clientY-o),c=Date.now()-r;i.mouseMoved=t>5||a>5||c>500}))}));function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function pe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==ye(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==ye(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===ye(i)?i:String(i)),o)}var r,i}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=be(e);if(t){var r=be(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return he(this,n)}}function he(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(i,e);var t,n,o,r=de(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).width=.5,t.height=.5,t.depth,a.gltfLoader.load("./models/marshal.glb",(function(e){e.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),t.modelMesh=e.scene.children[0],t.modelMesh.scale.set(.3,.3,.3),t.modelMesh.position.set(t.x,t.y,t.z),t.modelMesh.rotation.set(t.rotationX,t.rotationY,t.rotationZ),t.modelMesh.castShadow=!0,t.modelMesh.name=t.name,t.modelMesh.visible=!1,a.scene.add(t.modelMesh)})),t}return t=i,n&&pe(t.prototype,n),o&&pe(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(S),we=document.querySelectorAll("#reset"),ge=document.querySelector("#three-canvas"),Oe=new o.CP7({canvas:ge,antialias:!0});Oe.setSize(window.innerWidth,window.innerHeight),Oe.setPixelRatio(window.devicePixelRatio>1?2:1),Oe.shadowMap.enabled=!0,Oe.shadowMap.type=o.ntZ,a.scene.background=new o.Ilk(c);var je=new o.cPb(75,window.innerWidth/window.innerHeight,.1,1e3);je.position.y=19,je.position.z=14,a.scene.add(je);var Se=new o.Mig(s,1);a.scene.add(Se);var Pe=50,Me=new o.PMe(s,1.4);Me.castShadow=!0;var xe=Me.clone(),Ee=Me.clone(),_e=Me.clone();Me.position.set(-50,Pe,Pe),xe.position.set(Pe,Pe,Pe),Ee.position.set(-50,Pe,-50),_e.position.set(Pe,Pe,-50),a.scene.add(Me,xe,Ee,_e),new w.z(je,Oe.domElement).enableDamping=!0,a.world.gravity.set(0,-10,0);var Re=new i.kp(a.defaultMaterial,a.defaultMaterial,{friction:.3,restitution:.2}),Be=new i.kp(a.glassMaterial,a.defaultMaterial,{friction:.01,restitution:0}),Te=new i.kp(a.glassMaterial,a.playerMaterial,{friction:1,restitution:0});a.world.defaultContactMaterial=Re,a.world.addContactMaterial(Be),a.world.addContactMaterial(Te);var ze=1.2,ke=[],Ce=(new D({name:"floor"}),new B({name:"pillar1",x:0,y:5.5,z:12*-1.2-.6})),Le=new B({name:"pillar",x:0,y:5.5,z:14.999999999999998});ke.push(Ce,Le);for(var Ae=new I({name:"bar",x:-1.6,y:10.3,z:0}),De=(new I({name:"bar",x:-.4,y:10.3,z:0}),new I({name:"bar",x:1.6,y:10.3,z:0})),Ne=(new I({name:"bar",x:.4,y:10.3,z:0}),[]),Ye=0;Ye<49;Ye++)Ne.push(new Z({name:"sideLight",container:Ae.mesh,z:.5*Ye-12}));for(var qe=0;qe<49;qe++)Ne.push(new Z({name:"sideLight",container:De.mesh,z:.5*qe-12}));for(var Xe=[],Fe=[],He=0;He<10;He++)Fe.push(-(He*ze*2-9*ze));for(var Ie=0;Ie<10;Ie++){switch(Math.round(Math.random())){case 0:Xe=["normal","strong"];break;case 1:Xe=["strong","normal"]}var Ke=new ee({step:Ie+1,name:"glass-".concat(Xe[0]),x:-1,y:10.5,z:Fe[Ie],type:Xe[0],cannonMaterial:a.glassMaterial}),We=new ee({step:Ie+1,name:"glass-".concat(Xe[1]),x:1,y:10.5,z:Fe[Ie],type:Xe[1],cannonMaterial:a.glassMaterial});ke.push(Ke,We)}var Ze=10.9,Je=.03,Ue=(Math.PI,new ce({name:"player",x:0,y:Ze,z:13,rotationY:Math.PI,cannonMaterial:a.playerMaterial,mass:30}));ke.push(Ue);var Ve=new ve({name:"portal",x:0,y:Ze-.3,z:-16,rotationX:-Math.PI/2});ke.push(Ve);var $e=new o.iMs,Ge=new o.FM8;var Qe=new o.SUY,et=1,tt=0;var nt={};window.addEventListener("resize",(function(){je.aspect=window.innerWidth/window.innerHeight,je.updateProjectionMatrix(),Oe.setSize(window.innerWidth,window.innerHeight),Oe.render(a.scene,je)})),window.addEventListener("keydown",(function(e){nt[e.keyCode]=!0})),window.addEventListener("keyup",(function(e){nt[e.keyCode]=!1})),we[0].addEventListener("click",(function(){window.location.reload()})),ge.addEventListener("click",(function(e){fe.mouseMoved||(Ge.x=e.clientX/ge.clientWidth*2-1,Ge.y=-(e.clientY/ge.clientHeight*2-1),function(){if($e.setFromCamera(Ge,je),"Object_12"===$e.intersectObjects(a.scene.children)[0].object.name){var e=document.querySelectorAll("#clear");e[0].style.top="0%";var t=setTimeout((function(){e[0].style.animation="rotate_image 6s linear infinite",clearTimeout(t)}),1e3)}}())})),function e(){var t=Qe.getDelta();a.mixer&&a.mixer.update(t),a.world.step(1/60,t,3),(nt[87]||nt[38])&&(Ue.cannonBody.position.z-=Je),(nt[83]||nt[40])&&(Ue.cannonBody.position.z+=Je),(nt[65]||nt[37])&&(Ue.cannonBody.position.x-=Je),(nt[68]||nt[39])&&(Ue.cannonBody.position.x+=Je),nt[32]&&1===et&&Ue.cannonBody.position.y>10&&(Ue.actions[2].stop(),Ue.actions[2].play(),et=0,tt=Ue.cannonBody.position.y+3),ke.forEach((function(e){var t;if("pillar1"===e.name&&null!==(t=e.cannonBody)&&void 0!==t&&t.mesh.isEnd){var n=ke.find((function(e){return"portal"===e.name}));n.modelMesh.visible=!0}e.modelMesh&&"portal"===e.name?e.modelMesh.rotation.z+=.01:e.cannonBody&&("player"===e.name?Ue.modelMesh.position.copy(Ue.cannonBody.position):e.mesh?(e.mesh.position.copy(e.cannonBody.position),e.mesh.quaternion.copy(e.cannonBody.quaternion)):e.modelMesh&&(e.modelMesh.position.copy(e.cannonBody.position),e.modelMesh.quaternion.copy(e.cannonBody.quaternion)))})),Ue.modelMesh&&(Ue.cannonBody.position.y+=tt*t,0===et&&(tt-=19.6*t,Ue.cannonBody.position.y<=Ze&&(et=1,tt=0,Ue.cannonBody.position.y=Ze)),je.position.set(Ue.modelMesh.position.x,Ue.modelMesh.position.y+7,Ue.modelMesh.position.z+6),je.lookAt(Ue.modelMesh.position)),Oe.render(a.scene,je),Oe.setAnimationLoop(e)}()}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,n,r,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,r,i]=e[l],c=!0,s=0;s<n.length;s++)(!1&i||a>=i)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,r,i]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[a,c,s]=n,u=0;if(a.some((t=>0!==e[t]))){for(r in c)o.o(c,r)&&(o.m[r]=c[r]);if(s)var l=s(o)}for(t&&t(n);u<a.length;u++)i=a[u],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(l)},n=self.webpackChunkthreejs_study=self.webpackChunkthreejs_study||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[891],(()=>o(8919)));r=o.O(r)})();